<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Создать чеклист</title>
  <link rel="stylesheet" href="/static/styles.css">
  <style>
    .main-container {
      display: flex;
    }
    .left-panel {
      width: 30%;
      padding: 10px;
    }
    .right-panel {
      width: 70%;
      padding: 10px;
      border-left: 1px solid #ccc;
    }
    .checklist-item {
      border: 1px solid #ccc;
      padding: 5px;
      margin-bottom: 5px;
    }
  </style>
</head>
<body class="bg-main">
  <div class="container">
    <h2>Создание чеклиста</h2>
    <div class="main-container">
      <div class="left-panel">
        <button onclick="window.location.href='/select_location?data={{ data | urlencode }}'">Добавить локацию</button>
        <br><br>
        <button onclick="window.location.href='/'">Назад</button>
        <br><br>
        <form method="post" action="/save_checklist">
          <input type="hidden" name="data" value='{{ data }}'>
          <button type="submit">Сохранить чеклист</button>
        </form>
      </div>
      <div class="right-panel">
        <h3>Текущий чеклист:</h3>
        {% if checklist %}
          {% for item in checklist %}
            <div class="checklist-item">
              <strong>Локация: {{ item.location }}</strong><br>
              Объекты:
              <ul>
                {% for obj in item.objects %}
                  <li>{{ obj.name }} ({{ obj.cr_code }})</li>
                {% endfor %}
              </ul>
            </div>
          {% endfor %}
        {% else %}
          <p>Чеклист пуст.</p>
        {% endif %}
      </div>
    </div>
  </div>
</body>
</html>